//聊天逻辑
function User(name,faceUrl,isAuthor,isSelected){this.name=name,this.faceUrl=faceUrl,this.isAuthor=isAuthor,this.isSelected=isSelected}var data={isShowing:!1,newUserAvatar:"",newUserName:"",selectedUsers:[],users:[new User("王思聪","images/avatars/wsc.jpg"),new User("习近平","images/avatars/xjp.jpg"),new User("苍井空","images/avatars/cjk.jpg"),new User("黄晓明","images/avatars/hxm.jpg"),new User("Angelababy","images/avatars/baby.jpg"),new User("范冰冰","images/avatars/fbb.jpg"),new User("李晨","images/avatars/lc.jpg"),new User("邓超","images/avatars/dc1.jpg"),new User("鹿晗","images/avatars/lh.jpg"),new User("权志龙","images/avatars/bigbang-qzl.jpg"),new User("Rain","images/avatars/rain.png"),
//new User("斯坦森", "images/avatars/statham.jpg"),
//new User("斯嘉丽", "images/avatars/scarlett.jpg"),
new User("马云","images/avatars/my.jpg"),new User("刘强东","images/avatars/lqd.jpg")]},usersVM=new Vue({el:".root",data:data,methods:{pageLoad:function(){alert("load")},showAddDialog:function(event){this.isShowing=!0,event.stopPropagation()},selectPhoto:function(event){function html5Reader(fileUpload,vm){var file=fileUpload.files[0],reader=new FileReader;reader.readAsDataURL(file),reader.onload=function(e){vm.newUserAvatar=this.result}}var fileUpload=event.target,ext=fileUpload.value.substring(fileUpload.value.lastIndexOf(".")+1).toLowerCase();
// gif在IE浏览器暂时无法显示
// gif在IE浏览器暂时无法显示
return"png"!=ext&&"jpg"!=ext&&"jpeg"!=ext?void alert("文件必须为图片！"):void html5Reader(fileUpload,this)},addUser:function(){return console.log("addUser"),this.newUserName?this.newUserName?(this.users.push({isAuthor:!1,isSelected:!1,faceUrl:this.newUserAvatar,name:this.newUserName}),this.newUserName="",this.newUserAvatar="",void(this.isShowing=!1)):void alert("请输入名称"):void alert("请选择头像")},cancelAdd:function(){this.newUserName="",this.newUserAvatar="",this.isShowing=!1},chooseUser:function(index){this.selectedUsers.length<=0&&(this.users[index].isAuthor=!0),this.users[index].isSelected||(this.users[index].isSelected=!0,this.selectedUsers.push(this.users[index]),console.log("users.length: "+this.users.length),console.log("choose user: "+index),console.log("selected: "+this.users[index].isSelected),console.log(this.users[index].name))},resetUsers:function(){for(var i=0;i<this.selectedUsers.length;i++)this.selectedUsers[i].isAuthor=!1,this.selectedUsers[i].isSelected=!1;this.selectedUsers=[]},startChat:function(){this.selectedUsers.length>1?
//'fullscreen=1,directories=0,location=0,menubar=0,resizable=0,scrollbars=0,status=0,titlebar=no,toolbar=0'
window.open("chat.html"):alert("请选择用户自己及与其聊天的好友！")},hideDialog:function(event){this.choosing=!1,console.log("hideDialog")}}});
/*! wexinchat 最后修改于： 2015-11-13 */